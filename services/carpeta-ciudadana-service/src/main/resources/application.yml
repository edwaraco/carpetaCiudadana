server:
  port: 8080
  servlet:
    context-path: /api/v1

spring:
  application:
    name: carpeta-ciudadana-service

  # Configuración de carga de archivos
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
      enabled: true

  # Configuración para DynamoDB Local
  cloud:
    aws:
      dynamodb:
        endpoint: ${AWS_DYNAMODB_ENDPOINT:http://localhost:8000}
        region: ${AWS_REGION:us-east-1}
        credentials:
          access-key: ${AWS_ACCESS_KEY_ID:dummy}
          secret-key: ${AWS_SECRET_ACCESS_KEY:dummy}

  # Configuración de RabbitMQ
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:admin}
    password: ${RABBITMQ_PASSWORD:admin123}
    listener:
      simple:
        acknowledge-mode: auto
        retry:
          enabled: true
          initial-interval: 3000
          max-attempts: 3
          multiplier: 2

# Configuración de MinIO
minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:admin}
  secret-key: ${MINIO_SECRET_KEY:admin123}
  bucket-name: ${MINIO_BUCKET_NAME:carpeta-ciudadana-docs}
  presigned-url-expiry-minutes: ${MINIO_PRESIGNED_URL_EXPIRY:15}

# Configuración de logging
logging:
  level:
    root: INFO
    co.edu.eafit.carpeta: DEBUG
    org.springframework: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.springframework.boot: INFO
    org.hibernate: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    software.amazon.awssdk: DEBUG
    io.minio: DEBUG
    org.apache.http: DEBUG
    org.springframework.cloud: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/application.log
    max-size: 10MB
    max-history: 30

# Configuración de actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always

# Configuración de SpringDoc OpenAPI/Swagger
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
    doc-expansion: none
  show-actuator: false
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
