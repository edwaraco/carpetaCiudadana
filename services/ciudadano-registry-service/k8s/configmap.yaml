apiVersion: v1
kind: ConfigMap
metadata:
  name: ciudadano-registry-config
  namespace: carpeta-ciudadana
data:
  application.yml: |
    spring:
      application:
        name: ciudadano-registry-service

      jackson:
        serialization:
          write-dates-as-timestamps: false
        deserialization:
          fail-on-unknown-properties: false

    # Configuración de AWS DynamoDB (local para desarrollo)
    aws:
      region: us-east-1
      access-key-id: dummy
      secret-access-key: dummy
      dynamodb:
        endpoint: http://dynamodb-local:8000

    # Configuración de GovCarpeta API (external service)
    govcarpeta:
      api:
        base-url: https://govcarpeta-apis-4905ff3c005b.herokuapp.com
        timeout-seconds: 30

    # Configuración de Carpeta Ciudadana API (internal service)
    carpeta-ciudadana:
      api:
        base-url: http://carpeta-ciudadana-service:8080
        timeout-seconds: 30

    # Server configuration
    server:
      port: 8081
      servlet:
        context-path: /
      shutdown: graceful

    # Logging configuration
    logging:
      level:
        co.edu.eafit.carpeta.ciudadana.registry: DEBUG
        org.springframework.web: INFO
        org.springframework.web.client: DEBUG
      pattern:
        console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

    # Management endpoints
    management:
      endpoints:
        web:
          exposure:
            include: health,info,metrics
      endpoint:
        health:
          show-details: always
      health:
        defaults:
          enabled: true